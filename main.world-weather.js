!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=2)}([function(t,e,n){"use strict";n.r(e),n.d(e,"h",function(){return s}),n.d(e,"createElement",function(){return s}),n.d(e,"cloneElement",function(){return p}),n.d(e,"createRef",function(){return I}),n.d(e,"Component",function(){return L}),n.d(e,"render",function(){return T}),n.d(e,"rerender",function(){return v}),n.d(e,"options",function(){return o});var r=function(){},o={},i=[],a=[];function s(t,e){var n,s,u,l,c=a;for(l=arguments.length;l-- >2;)i.push(arguments[l]);for(e&&null!=e.children&&(i.length||i.push(e.children),delete e.children);i.length;)if((s=i.pop())&&void 0!==s.pop)for(l=s.length;l--;)i.push(s[l]);else"boolean"==typeof s&&(s=null),(u="function"!=typeof t)&&(null==s?s="":"number"==typeof s?s=String(s):"string"!=typeof s&&(u=!1)),u&&n?c[c.length-1]+=s:c===a?c=[s]:c.push(s),n=u;var p=new r;return p.nodeName=t,p.children=c,p.attributes=null==e?void 0:e,p.key=null==e?void 0:e.key,void 0!==o.vnode&&o.vnode(p),p}function u(t,e){for(var n in e)t[n]=e[n];return t}function l(t,e){null!=t&&("function"==typeof t?t(e):t.current=e)}var c="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;function p(t,e){return s(t.nodeName,u(u({},t.attributes),e),arguments.length>2?[].slice.call(arguments,2):t.children)}var h=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,f=[];function d(t){!t._dirty&&(t._dirty=!0)&&1==f.push(t)&&(o.debounceRendering||c)(v)}function v(){for(var t;t=f.pop();)t._dirty&&A(t)}function y(t,e,n){return"string"==typeof e||"number"==typeof e?void 0!==t.splitText:"string"==typeof e.nodeName?!t._componentConstructor&&m(t,e.nodeName):n||t._componentConstructor===e.nodeName}function m(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function _(t){var e=u({},t.attributes);e.children=t.children;var n=t.nodeName.defaultProps;if(void 0!==n)for(var r in n)void 0===e[r]&&(e[r]=n[r]);return e}function b(t){var e=t.parentNode;e&&e.removeChild(t)}function g(t,e,n,r,o){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)l(n,null),l(r,t);else if("class"!==e||o)if("style"===e){if(r&&"string"!=typeof r&&"string"!=typeof n||(t.style.cssText=r||""),r&&"object"==typeof r){if("string"!=typeof n)for(var i in n)i in r||(t.style[i]="");for(var i in r)t.style[i]="number"==typeof r[i]&&!1===h.test(i)?r[i]+"px":r[i]}}else if("dangerouslySetInnerHTML"===e)r&&(t.innerHTML=r.__html||"");else if("o"==e[0]&&"n"==e[1]){var a=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),r?n||t.addEventListener(e,w,a):t.removeEventListener(e,w,a),(t._listeners||(t._listeners={}))[e]=r}else if("list"!==e&&"type"!==e&&!o&&e in t){try{t[e]=null==r?"":r}catch(t){}null!=r&&!1!==r||"spellcheck"==e||t.removeAttribute(e)}else{var s=o&&e!==(e=e.replace(/^xlink:?/,""));null==r||!1===r?s?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof r&&(s?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),r):t.setAttribute(e,r))}else t.className=r||""}function w(t){return this._listeners[t.type](o.event&&o.event(t)||t)}var C=[],x=0,P=!1,O=!1;function N(){for(var t;t=C.shift();)o.afterMount&&o.afterMount(t),t.componentDidMount&&t.componentDidMount()}function k(t,e,n,r,o,i){x++||(P=null!=o&&void 0!==o.ownerSVGElement,O=null!=t&&!("__preactattr_"in t));var a=M(t,e,n,r,i);return o&&a.parentNode!==o&&o.appendChild(a),--x||(O=!1,i||N()),a}function M(t,e,n,r,o){var i=t,a=P;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||o)?t.nodeValue!=e&&(t.nodeValue=e):(i=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(i,t),j(t,!0))),i.__preactattr_=!0,i;var s,u,l=e.nodeName;if("function"==typeof l)return function(t,e,n,r){var o=t&&t._component,i=o,a=t,s=o&&t._componentConstructor===e.nodeName,u=s,l=_(e);for(;o&&!u&&(o=o._parentComponent);)u=o.constructor===e.nodeName;o&&u&&(!r||o._component)?(W(o,l,3,n,r),t=o.base):(i&&!s&&(B(i),t=a=null),o=D(e.nodeName,l,n),t&&!o.nextBase&&(o.nextBase=t,a=null),W(o,l,1,n,r),t=o.base,a&&t!==a&&(a._component=null,j(a,!1)));return t}(t,e,n,r);if(P="svg"===l||"foreignObject"!==l&&P,l=String(l),(!t||!m(t,l))&&(s=l,(u=P?document.createElementNS("http://www.w3.org/2000/svg",s):document.createElement(s)).normalizedNodeName=s,i=u,t)){for(;t.firstChild;)i.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(i,t),j(t,!0)}var c=i.firstChild,p=i.__preactattr_,h=e.children;if(null==p){p=i.__preactattr_={};for(var f=i.attributes,d=f.length;d--;)p[f[d].name]=f[d].value}return!O&&h&&1===h.length&&"string"==typeof h[0]&&null!=c&&void 0!==c.splitText&&null==c.nextSibling?c.nodeValue!=h[0]&&(c.nodeValue=h[0]):(h&&h.length||null!=c)&&function(t,e,n,r,o){var i,a,s,u,l,c=t.childNodes,p=[],h={},f=0,d=0,v=c.length,m=0,_=e?e.length:0;if(0!==v)for(var g=0;g<v;g++){var w=c[g],C=w.__preactattr_,x=_&&C?w._component?w._component.__key:C.key:null;null!=x?(f++,h[x]=w):(C||(void 0!==w.splitText?!o||w.nodeValue.trim():o))&&(p[m++]=w)}if(0!==_)for(var g=0;g<_;g++){u=e[g],l=null;var x=u.key;if(null!=x)f&&void 0!==h[x]&&(l=h[x],h[x]=void 0,f--);else if(d<m)for(i=d;i<m;i++)if(void 0!==p[i]&&y(a=p[i],u,o)){l=a,p[i]=void 0,i===m-1&&m--,i===d&&d++;break}l=M(l,u,n,r),s=c[g],l&&l!==t&&l!==s&&(null==s?t.appendChild(l):l===s.nextSibling?b(s):t.insertBefore(l,s))}if(f)for(var g in h)void 0!==h[g]&&j(h[g],!1);for(;d<=m;)void 0!==(l=p[m--])&&j(l,!1)}(i,h,n,r,O||null!=p.dangerouslySetInnerHTML),function(t,e,n){var r;for(r in n)e&&null!=e[r]||null==n[r]||g(t,r,n[r],n[r]=void 0,P);for(r in e)"children"===r||"innerHTML"===r||r in n&&e[r]===("value"===r||"checked"===r?t[r]:n[r])||g(t,r,n[r],n[r]=e[r],P)}(i,e.attributes,p),P=a,i}function j(t,e){var n=t._component;n?B(n):(null!=t.__preactattr_&&l(t.__preactattr_.ref,null),!1!==e&&null!=t.__preactattr_||b(t),S(t))}function S(t){for(t=t.lastChild;t;){var e=t.previousSibling;j(t,!0),t=e}}var U=[];function D(t,e,n){var r,o=U.length;for(t.prototype&&t.prototype.render?(r=new t(e,n),L.call(r,e,n)):((r=new L(e,n)).constructor=t,r.render=H);o--;)if(U[o].constructor===t)return r.nextBase=U[o].nextBase,U.splice(o,1),r;return r}function H(t,e,n){return this.constructor(t,n)}function W(t,e,n,r,i){t._disable||(t._disable=!0,t.__ref=e.ref,t.__key=e.key,delete e.ref,delete e.key,void 0===t.constructor.getDerivedStateFromProps&&(!t.base||i?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,r)),r&&r!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=r),t.prevProps||(t.prevProps=t.props),t.props=e,t._disable=!1,0!==n&&(1!==n&&!1===o.syncComponentUpdates&&t.base?d(t):A(t,1,i)),l(t.__ref,t))}function A(t,e,n,r){if(!t._disable){var i,a,s,l=t.props,c=t.state,p=t.context,h=t.prevProps||l,f=t.prevState||c,d=t.prevContext||p,v=t.base,y=t.nextBase,m=v||y,b=t._component,g=!1,w=d;if(t.constructor.getDerivedStateFromProps&&(c=u(u({},c),t.constructor.getDerivedStateFromProps(l,c)),t.state=c),v&&(t.props=h,t.state=f,t.context=d,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(l,c,p)?g=!0:t.componentWillUpdate&&t.componentWillUpdate(l,c,p),t.props=l,t.state=c,t.context=p),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!g){i=t.render(l,c,p),t.getChildContext&&(p=u(u({},p),t.getChildContext())),v&&t.getSnapshotBeforeUpdate&&(w=t.getSnapshotBeforeUpdate(h,f));var P,O,M=i&&i.nodeName;if("function"==typeof M){var S=_(i);(a=b)&&a.constructor===M&&S.key==a.__key?W(a,S,1,p,!1):(P=a,t._component=a=D(M,S,p),a.nextBase=a.nextBase||y,a._parentComponent=t,W(a,S,0,p,!1),A(a,1,n,!0)),O=a.base}else s=m,(P=b)&&(s=t._component=null),(m||1===e)&&(s&&(s._component=null),O=k(s,i,p,n||!v,m&&m.parentNode,!0));if(m&&O!==m&&a!==b){var U=m.parentNode;U&&O!==U&&(U.replaceChild(O,m),P||(m._component=null,j(m,!1)))}if(P&&B(P),t.base=O,O&&!r){for(var H=t,L=t;L=L._parentComponent;)(H=L).base=O;O._component=H,O._componentConstructor=H.constructor}}for(!v||n?C.push(t):g||(t.componentDidUpdate&&t.componentDidUpdate(h,f,w),o.afterUpdate&&o.afterUpdate(t));t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);x||r||N()}}function B(t){o.beforeUnmount&&o.beforeUnmount(t);var e=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var n=t._component;n?B(n):e&&(null!=e.__preactattr_&&l(e.__preactattr_.ref,null),t.nextBase=e,b(e),U.push(t),S(e)),l(t.__ref,null)}function L(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{},this._renderCallbacks=[]}function T(t,e,n){return k(n,t,{},!1,e,!1)}function I(){return{}}u(L.prototype,{setState:function(t,e){this.prevState||(this.prevState=this.state),this.state=u(u({},this.state),"function"==typeof t?t(this.state,this.props):t),e&&this._renderCallbacks.push(e),d(this)},forceUpdate:function(t){t&&this._renderCallbacks.push(t),A(this,2)},render:function(){}});var V={h:s,createElement:s,cloneElement:p,createRef:I,Component:L,render:T,rerender:v,options:o};e.default=V},function(t,e,n){var r=n(8),o=n(0).h;t.exports=r.bind(null,o)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n(3);var r=n(0),o=n(4),i=n(15),a=n(18),s=new i.WorldWeatherController(new a.Mapbox);r.render(r.h(o.WorldWeather,{controller:s}),document.getElementsByTagName("WorldWeather").item(0))},function(t,e,n){},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=n(5),s=n(11),u=n(12),l=function(t){function e(e){var n=t.call(this,e)||this;return e.controller.setOnChange(function(){return n.setState({})}),n}return o(e,t),e.prototype.render=function(){return i.h("div",{className:"world-weather"},i.h("div",{className:"flex-box"},i.h("div",{style:"flex-grow:1;"}),i.h("div",{style:"flex-grow:1;"},this.renderSearchBox(),this.renderMasterView()),i.h("div",{style:"flex-grow:1;"})))},e.prototype.renderMasterView=function(){var t=this,e=this.props.controller;return i.h(a.MasterView,{listSource:e.selectedCities.map(function(t){return{key:t.name,label:t.name,object:t}}),onDelete:function(t){return e.deleteCity(t.object)},onMoveUp:function(e){return t.move(e,-1)},onMoveDown:function(e){return t.move(e,1)}},function(t,n,r){return i.h(u.CityView,{city:t,active:n,activatePanel:r,units:e.imperialUnits?"imperial":"international"})})},e.prototype.renderSearchBox=function(){var t=this,e=this.props.controller;return i.h("div",{className:"flex-box vertical-margin-half"},i.h(s.SearchBox,{onSelect:function(t){return e.addCity(t.object)},onInput:function(t){return e.findCity(t)},items:e.foundCities.map(function(t){return{key:t.name,label:t.placeName,object:t}})}),i.h("button",{className:"units-button flex-vertical-center align-center",onClick:function(){e.imperialUnits=!e.imperialUnits,t.setState({}),console.log(e.imperialUnits)}},i.h("p",null,"Units"),i.h("p",null,e.imperialUnits?"ºF":"ºC")))},e.prototype.move=function(t,e){var n=this.props.controller.moveCity(t.object,e);if(n)return{key:n.name,label:n.placeName,object:n}},e}(i.Component);e.WorldWeather=l},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=n(6),u=function(t){function e(e){var n=t.call(this,e)||this;return n.detailViewClicked(""),n}return o(e,t),e.prototype.componentDidUpdate=function(){this.scrollBy&&(window.scrollBy(0,this.scrollBy),this.scrollBy=0)},e.prototype.render=function(){var t=this,e=this.props.listSource;return a.h("ul",{className:"master-view"},e.map(function(e){return a.h("li",{id:e.key,key:e.key},a.h(s.DetailView,{item:e,queryActivate:function(){return t.detailViewClicked(e.key)},active:t.state.active[e.key],onDelete:function(){return t.delete(e)},onMoveUp:function(){return t.moveUp(e)},onMoveDown:function(){return t.moveDown(e)},haveToShowUp:function(){return t.haveToShowUpArrow(e)},haveToShowDown:function(){return t.haveToShowDownArrow(e)}},t.props.children))}))},e.prototype.delete=function(t){this.props.onDelete(t),this.setState({})},e.prototype.moveUp=function(t){var e=this.props.onMoveUp(t);this.setState({}),this.scrollBy=-this.base.children.namedItem(e.key).scrollHeight},e.prototype.moveDown=function(t){var e=this.props.onMoveDown(t);this.setState({}),this.scrollBy=this.base.children.namedItem(e.key).scrollHeight},e.prototype.detailViewClicked=function(t){var e=this;this.setState(function(n){var r=i({},n.active);return e.props.listSource.forEach(function(e){return r[e.key]=e.key===t&&!r[e.key]}),{active:r}})},e.prototype.haveToShowUpArrow=function(t){return 0!=this.props.listSource.indexOf(t)},e.prototype.haveToShowDownArrow=function(t){return this.props.listSource.indexOf(t)!=this.props.listSource.length-1},e}(a.Component);e.MasterView=u},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=n(7),s=n(9),u=n(10),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){var t=this.props,e=t.item,n=t.children,r=t.onMoveDown,o=t.onMoveUp,l=t.onDelete,c=t.haveToShowUp,p=t.haveToShowDown;return i.h("div",{className:"detail-view"},i.h("div",{className:"detail-icon-panel"},i.h("div",{className:"move-arrows"},i.h("span",{className:"arrow-icon-text up-button"+(c(e)?"":" hide"),onClick:function(){return o(e)}},i.h(s,{"data-icon":"angle-up",fill:"gray",width:"1em",height:"1.4em",className:"svg-inline icon-button"}),"Up"),i.h("span",{className:"arrow-icon-text down-button"+(p(e)?"":" hide"),onClick:function(){return r(e)}},i.h(u,{"data-icon":"angle-down",fill:"gray",width:"1em",height:"1.4em",className:"svg-inline icon-button"}),"Down")),i.h("div",{className:"trash-bin-icon"},i.h(a,{"data-icon":"trash-alt",fill:"#f99898",width:"1em",height:"1em",className:"svg-inline icon-button",onClick:function(){return l(e)}}))),i.h("div",{className:"detail-content"},n.length?n[0](e.object,this.props.active,this.props.queryActivate):i.h("p",null,e.label)))},e}(i.Component);e.DetailView=l},function(t,e,n){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 448 512"},content:'<path d="M268 416h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12zM432 80h-82.41l-34-56.7A48 48 0 0 0 274.41 0H173.59a48 48 0 0 0-41.16 23.3L98.41 80H16A16 16 0 0 0 0 96v16a16 16 0 0 0 16 16h16v336a48 48 0 0 0 48 48h288a48 48 0 0 0 48-48V128h16a16 16 0 0 0 16-16V96a16 16 0 0 0-16-16zM171.84 50.91A6 6 0 0 1 177 48h94a6 6 0 0 1 5.15 2.91L293.61 80H154.39zM368 464H80V128h288zm-212-48h24a12 12 0 0 0 12-12V188a12 12 0 0 0-12-12h-24a12 12 0 0 0-12 12v216a12 12 0 0 0 12 12z"/>'};var r=n(1);t.exports=r(t.exports)},function(t,e){t.exports=function(t,e,n){n=n||{};var r=e.content,o=e.attributes;return function(e){return t("svg",Object.assign({dangerouslySetInnerHTML:{__html:r}},o,e),e&&e.children)}}},function(t,e,n){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},content:'<path d="M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"/>'};var r=n(1);t.exports=r(t.exports)},function(t,e,n){t.exports={attributes:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512"},content:'<path d="M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"/>'};var r=n(1);t.exports=r(t.exports)},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var a=n(0),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.componentDidMount=function(){var t=this;this.setState({value:this.props.value}),window.addEventListener("click",function(e){return t.globalClickHandler(e)})},e.prototype.componentWillUnmount=function(){var t=this;window.removeEventListener("click",function(e){return t.globalClickHandler(e)})},e.prototype.render=function(){var t=this,e=i({},this.state),n=e.value,r=e.showItems,o=i({},this.props).items;return a.h("div",{className:"search-box"},a.h("input",{value:n,placeholder:"type a city to add",onInput:function(e){return t.valueChanged(e.target.value)}}),a.h("ul",{className:"search-box-panel"+(r?"":" hide"),onClick:function(){return t.setState({showItems:!1})}},o&&o.map(function(e){return a.h("li",{key:e.key,className:"button",onClick:function(){return t.itemClicked(e)}},e.label)})))},e.prototype.itemClicked=function(t){this.props.onSelect&&this.props.onSelect(t),this.setState({showItems:!1,value:""})},e.prototype.valueChanged=function(t){this.setState({value:t,showItems:""!==t}),this.props.onInput&&this.props.onInput(t)},e.prototype.globalClickHandler=function(t){this.base&&!this.base.contains(t.target)&&this.setState({showItems:!1})},e}(a.Component);e.SearchBox=s},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),a=n(13),s=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.render=function(){var t=this,e=this.props.city,n=a.UnitConverter.getMeasureUnit("temperature","imperial"===this.props.units),r=a.UnitConverter.getConvertedMeasures(this.props.city.weatherData,"imperial"===this.props.units);return i.h("div",{className:"city-view"},i.h("div",{className:"accordion-header flex-box"},i.h("div",{className:"header-city-name clickable",onClick:function(){return t.props.activatePanel()}},i.h("h2",null,e.name)),i.h("div",{className:"heder-data"},i.h("img",{src:"http://openweathermap.org/img/w/"+e.weatherData.icon+".png"})),i.h("div",{className:"header-data dim-color"},i.h("h3",null,r.temp.current,n))),i.h("div",{className:"panel-content accordion-panel",style:{maxHeight:this.getAnimatedPanelHeight()}},this.renderContent()))},e.prototype.renderContent=function(){var t=this,e=a.UnitConverter.getConvertedMeasures(this.props.city.weatherData,"imperial"===this.props.units),n=a.UnitConverter.getMeasureUnit("temperature","imperial"===this.props.units),r=a.UnitConverter.getMeasureUnit("speed","imperial"===this.props.units),o=a.UnitConverter.getMeasureUnit("pressure","imperial"===this.props.units),s=a.UnitConverter.getMeasureUnit("length","imperial"===this.props.units);return i.h("div",{className:"city-view-detail flex-box"},i.h("div",{style:"flex-grow: 1"}),i.h("div",{style:"flex-grow: 1"},i.h("div",{className:"flex-box vertical-flex"},i.h("p",null,"Min: ",e.temp.min,n," Max: ",e.temp.max,n),i.h("h1",null,e.temp.current,n),i.h("img",{src:"http://openweathermap.org/img/w/"+e.icon+".png",width:"50px"}),i.h("h3",null,e.weather),i.h("p",null,e.description)),i.h("div",{className:"weather-details"},i.h("p",null,"Wind: ",e.wind," ",r),i.h("p",null,"Pressure: ",e.pressure," ",o),i.h("p",null,"Humidity: ",e.humidity,"%"),i.h("p",null,"Rain: ",e.rain," ",s)),i.h("div",{className:"flex-box"},this.props.city.hourlyWeatherData.slice(0,8).map(function(e){return t.renderHourlyData(e)}))),i.h("div",{style:"flex-grow: 1"}))},e.prototype.renderHourlyData=function(t){var e=a.UnitConverter.getConvertedMeasures(t,"imperial"===this.props.units);return i.h("div",{className:"hourly-data"},i.h("p",null,t.time.getHours(),":00"),i.h("img",{src:"http://openweathermap.org/img/w/"+t.icon+".png"}),i.h("p",null,e.temp.current,a.UnitConverter.getMeasureUnit("temperature","imperial"===this.props.units)))},e}(n(14).AnimatedPanel);e.CityView=s},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.toCelsius=function(t){return Math.round(t-272.15)},t.toFahrenheit=function(t){return Math.round(9*t/5-459.67)},t.toMPH=function(t){return Math.round(100*t*2.23693629)/100},t.toInches=function(t){return Math.round(1e3*t*.0393700787)/1e3},t.getConvertedMeasures=function(e,n){var o=r({},e);return o.wind=n?t.toMPH(e.wind):e.wind,o.temp={current:n?t.toFahrenheit(e.temp.current):t.toCelsius(e.temp.current),min:n?t.toFahrenheit(e.temp.min):t.toCelsius(e.temp.min),max:n?t.toFahrenheit(e.temp.max):t.toCelsius(e.temp.max)},o.rain=n?t.toInches(e.rain):e.rain,o},t.getMeasureUnit=function(t,e){switch(t){case"speed":return e?"mph":"m/s";case"temperature":return e?"ºF":"ºC";case"pressure":return"hPa";case"length":return e?"in":"mm"}},t}();e.UnitConverter=o},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.componentDidUpdate=function(){this.updateContentPanelHeight()},e.prototype.getAnimatedPanelHeight=function(){return this.props.active?this.state.scrollHeight+"px":null},e.prototype.updateContentPanelHeight=function(){var t=this.getContentPanelHeight()+900;t!==this.state.scrollHeight&&this.setState({scrollHeight:t})},e.prototype.getContentPanelHeight=function(){var t=this.base.getElementsByClassName("panel-content");return t.length&&t.item(0).scrollHeight},e}(n(0).Component);e.AnimatedPanel=i},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),a=n(17),s=function(){function t(t){this._selectedCitiesList=new i.List,this._foundCities=[],this._placesAPI=t}return t.prototype.findCity=function(t){return r(this,void 0,void 0,function(){var e=this;return o(this,function(n){return[2,new Promise(function(n){return e._placesAPI.getCities(t,5).then(function(t){e._foundCities=t.slice(),e.notifyChange(),n(t)})})]})})},Object.defineProperty(t.prototype,"foundCities",{get:function(){return this._foundCities},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectedCities",{get:function(){return this._selectedCitiesList.items},enumerable:!0,configurable:!0}),t.prototype.addCity=function(e){return r(this,void 0,void 0,function(){return o(this,function(n){switch(n.label){case 0:return[4,t.refreshWeatherData(e)];case 1:return e=n.sent(),this._selectedCitiesList.push(e),this.notifyChange(),[2]}})})},t.prototype.deleteCity=function(t){this._selectedCitiesList.delete(t),this.notifyChange()},t.prototype.moveCity=function(t,e){var n=this._selectedCitiesList.swap(t,e);return this.notifyChange(),n},t.prototype.setOnChange=function(t){return this._onChange=t,this},Object.defineProperty(t.prototype,"imperialUnits",{get:function(){return this._imperialUnits},set:function(t){this._imperialUnits=t},enumerable:!0,configurable:!0}),t.prototype.notifyChange=function(){this._onChange&&this._onChange()},t.refreshWeatherData=function(t){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,a.WeatherData.get(t)];case 1:return t=e.sent(),[4,a.WeatherData.getHourly(t)];case 2:return[2,t=e.sent()]}})})},t}();e.WorldWeatherController=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){void 0===t&&(t=[]),this._list=t.slice(),this._onChange=e}return t.prototype.push=function(t){this._list.push(t),this._onChange&&this._onChange(this._list)},t.prototype.swap=function(t,e){var n=this._list.indexOf(t),r=n+e;return n<0||r<0||r>=this.length?null:(this._list[n]=this._list[r],this._list[r]=t,this._onChange&&this._onChange(this._list),this._list[n])},t.prototype.move=function(t,e){var n=this._list.indexOf(t);n<0||e<0||e>=this.length||(this._list.splice(e,0,this._list.splice(n,1)[0]),this._onChange&&this._onChange(this._list))},t.prototype.delete=function(t){var e=this._list.indexOf(t);return e>=0?(this._onChange&&this._onChange(this._list),this._list.splice(e,1)[0]):null},t.prototype.map=function(t,e){return this._list.map(t,e)},t.prototype.sort=function(t){return this._list.sort(t)},Object.defineProperty(t.prototype,"items",{get:function(){return this._list},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"length",{get:function(){return this._list.length},enumerable:!0,configurable:!0}),t.prototype.isClone=function(t){if(this.length!=t.length)return!1;for(var e=!0,n=0;e&&n<this.length;)e=this._list[n]===t[n],n++;return e},t.prototype.equal=function(t){if(this.length!=t.length)return!1;var e=!0;return this._list.forEach(function(n){return e=e&&t.indexOf(n)>=0}),e},t.prototype.find=function(t){return this._list.find(t)},t}();e.List=r},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var i,a,s,u=function(){function t(){}return t.get=function(e,n){return r(this,void 0,void 0,function(){var r,i,a;return o(this,function(o){switch(o.label){case 0:return r=n?n.latitude:e.location.latitude,i=n?n.longitude:e.location.longitude,[4,fetch("https://api.openweathermap.org/data/2.5/weather?APPID="+t.apiKey+"&lat="+r+"&lon="+i)];case 1:return[4,o.sent().json()];case 2:return a=o.sent(),[2,e.setWeatherData(this.fillFields(a))]}})})},t.getHourly=function(e,n){return r(this,void 0,void 0,function(){var r,i,a,s=this;return o(this,function(o){switch(o.label){case 0:return r=n?n.latitude:e.location.latitude,i=n?n.longitude:e.location.longitude,[4,fetch("https://api.openweathermap.org/data/2.5/forecast?APPID="+t.apiKey+"&lat="+r+"&lon="+i)];case 1:return[4,o.sent().json()];case 2:return a=o.sent(),[2,e.setHourlyWeatherData(a.list.map(function(t){return s.fillFields(t)}))]}})})},t.fillFields=function(t){return{time:new Date(1e3*t.dt),temp:{current:t.main.temp,min:t.main.temp_min,max:t.main.temp_max},pressure:t.main.pressure,humidity:t.main.humidity,rain:t.rain?t.rain["1h"]:0,wind:t.wind.speed,icon:t.weather[0].icon,weather:t.weather[0].main,description:t.weather[0].description}},t.apiKey="04b1ffd8fc46ad9be74016c1ad44f636",t}();e.WeatherData=u,function(t){t.D="d",t.N="n"}(i||(i={})),function(t){t.BrokenClouds="broken clouds",t.ClearSky="clear sky",t.FewClouds="few clouds",t.LightRain="light rain",t.OvercastClouds="overcast clouds",t.ScatteredClouds="scattered clouds"}(a||(a={})),function(t){t.Clear="Clear",t.Clouds="Clouds",t.Rain="Rain"}(s||(s={}))},function(t,e,n){"use strict";var r=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(o,i){function a(t){try{u(r.next(t))}catch(t){i(t)}}function s(t){try{u(r.throw(t))}catch(t){i(t)}}function u(t){t.done?o(t.value):new n(function(e){e(t.value)}).then(a,s)}u((r=r.apply(t,e||[])).next())})},o=this&&this.__generator||function(t,e){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}};Object.defineProperty(e,"__esModule",{value:!0});var i=n(19),a=function(){function t(){}return t.prototype.getCities=function(t,e){var n=this,a="https://api.mapbox.com/geocoding/v5/mapbox.places/"+t+".json?access_token=pk.eyJ1IjoibWF0dGZpY2tlIiwiYSI6ImNqNnM2YmFoNzAwcTMzM214NTB1NHdwbnoifQ.Or19S7KmYPHW8YjRz82v6g&cachebuster=1560237075230&autocomplete=true&types=place";return e&&(a+="&limit="+e),new Promise(function(t){fetch(a).then(function(e){return r(n,void 0,void 0,function(){var n,r;return o(this,function(o){switch(o.label){case 0:return[4,e.json()];case 1:return n=o.sent(),r=[],n.features.forEach(function(t){r.push((new i.City).setName(t.text).setPlaceName(t.place_name).setLocation({latitude:t.center[1],longitude:t.center[0]}))}),t(r),[2]}})})})})},t}();e.Mapbox=a},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(){}return t.prototype.setCode=function(t){return this._code=t,this},Object.defineProperty(t.prototype,"code",{get:function(){return this._code},enumerable:!0,configurable:!0}),t.prototype.setName=function(t){return this._name=t,this},Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),t.prototype.setPlaceName=function(t){return this._placeName=t,this},Object.defineProperty(t.prototype,"placeName",{get:function(){return this._placeName},enumerable:!0,configurable:!0}),t.prototype.setLocation=function(t){return this._location=t,this},Object.defineProperty(t.prototype,"location",{get:function(){return this._location},enumerable:!0,configurable:!0}),t.prototype.setWeatherData=function(t){return this._weatherData=r({},t),this},Object.defineProperty(t.prototype,"weatherData",{get:function(){return this._weatherData},enumerable:!0,configurable:!0}),t.prototype.setHourlyWeatherData=function(t){return this._hourlyWeatherData=t.slice(),this},Object.defineProperty(t.prototype,"hourlyWeatherData",{get:function(){return this._hourlyWeatherData},enumerable:!0,configurable:!0}),t}();e.City=o}])});
//# sourceMappingURL=main.world-weather.js.map